<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é»„é‡‘æ—¥å†…å®ç›˜ç›ˆäºè®¡ç®—å·¥å…·ï¼ˆå®ç›˜æå€¼+è‡ªå®šä¹‰ç›®æ ‡ï¼‰</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#D4AF37', // é»„é‡‘ä¸»è‰²
                        secondary: '#854D0E', // é‡‘è‰²è¾…åŠ©è‰²
                        success: '#16A34A', // ç›ˆåˆ©/æ­¢ç›ˆ
                        danger: '#DC2626', // äºæŸ/æ­¢æŸ
                        info: '#2563EB',   // å®ç›˜æ•°æ®/æ³¢åŠ¨å¹…åº¦
                        neutral: '#1F2937', // æ·±è‰²æ–‡å­—
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .card-shadow {
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            }
            .input-focus {
                @apply focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none;
            }
            .table-hover {
                @apply hover:bg-gray-50 transition-colors;
            }
            .data-card {
                @apply bg-gray-50 rounded-lg p-4 border border-gray-200;
            }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen py-8 px-4 sm:px-6 lg:px-8">
    <div class="max-w-4xl mx-auto">
        <!-- é¡µé¢æ ‡é¢˜+å®ç›˜æç¤º -->
        <header class="text-center mb-8">
            <h1 class="text-[clamp(1.8rem,4vw,2.5rem)] font-bold text-neutral flex items-center justify-center gap-2">
                <i class="fa fa-gold fa-line-chart text-primary"></i> é»„é‡‘æ—¥å†…å®ç›˜ç›ˆäºè®¡ç®—å·¥å…·
            </h1>
            <p class="text-gray-600 mt-2">å½“å¤©ä¹°å½“å¤©å– | å®ç›˜æå€¼æµ‹ç®— | è‡ªå®šä¹‰ç›®æ ‡æŒ‚å•</p>
            <div class="mt-3 flex flex-wrap justify-center gap-2 text-sm py-2 px-4 bg-info/5 rounded-lg border border-info/20">
                <span class="text-info font-medium flex items-center"><i class="fa fa-bar-chart mr-1"></i> å®ç›˜æå€¼ï¼šå½“æ—¥æœ€é«˜/æœ€ä½ä»·æµ‹ç®—å®é™…ç›ˆäº</span>
                <span class="text-neutral/70 font-medium flex items-center"><i class="fa fa-crosshairs mr-1"></i> è‡ªå®šä¹‰ç›®æ ‡ï¼šæ‰‹åŠ¨æŒ‚å•æ­¢ç›ˆ/æ­¢æŸä»·æµ‹ç®—</span>
            </div>
            <p class="text-xs text-gray-500 mt-2">ğŸ’¡ è®¡å…¥é“¶è¡ŒåŒå‘æ‰‹ç»­è´¹ï¼ˆé»˜è®¤0.5%ï¼‰ï¼Œç»“æœè´´åˆå®ç›˜äº¤æ˜“</p>
        </header>

        <!-- æ ¸å¿ƒè¾“å…¥è¡¨å•ï¼ˆå»ºä»“+å®ç›˜æå€¼+è‡ªå®šä¹‰ç›®æ ‡ï¼‰ -->
        <div class="bg-white rounded-lg p-6 sm:p-8 card-shadow mb-8">
            <h2 class="text-xl font-semibold text-neutral mb-6 pb-2 border-b border-gray-200">æ—¥å†…äº¤æ˜“æ ¸å¿ƒä¿¡æ¯</h2>
            <form id="goldForm" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- åŸºç¡€å»ºä»“ä¿¡æ¯ï¼ˆå¿…å¡«ï¼‰ -->
                <div class="space-y-2">
                    <label for="buyPrice" class="block text-sm font-medium text-gray-700">
                        å»ºä»“é‡‘ä»·ï¼ˆå…ƒ/å…‹ï¼‰<span class="text-danger">*</span>
                    </label>
                    <input 
                        type="number" 
                        id="buyPrice" 
                        placeholder="ä¾‹ï¼š485.20" 
                        step="0.01" 
                        min="0" 
                        required
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus"
                    >
                </div>
                <div class="space-y-2">
                    <label for="buyAmount" class="block text-sm font-medium text-gray-700">
                        å»ºä»“æ€»é‡‘é¢ï¼ˆå…ƒï¼‰<span class="text-danger">*</span>
                    </label>
                    <input 
                        type="number" 
                        id="buyAmount" 
                        placeholder="ä¾‹ï¼š5000/10000" 
                        step="0.01" 
                        min="0" 
                        required
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus"
                    >
                </div>
                <div class="space-y-2 lg:col-span-3">
                    <label for="feeRate" class="block text-sm font-medium text-gray-700">
                        å•è¾¹æ‰‹ç»­è´¹æ¯”ä¾‹ï¼ˆ%ï¼‰<span class="text-gray-500 text-xs">ï¼ˆä¸»æµé“¶è¡Œ0.5%ï¼ŒåŒå‘æ”¶å–è‡ªåŠ¨è®¡ç®—ï¼‰</span>
                    </label>
                    <input 
                        type="number" 
                        id="feeRate" 
                        value="0.5" 
                        step="0.01" 
                        min="0" 
                        max="5"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus"
                    >
                </div>

                <!-- å½“æ—¥å®ç›˜æå€¼ï¼ˆé€‰å¡«ï¼Œå¡«å†™åˆ™æµ‹ç®—å®ç›˜ç›ˆäºï¼‰ -->
                <div class="space-y-2 sm:col-span-2 lg:col-span-1">
                    <label for="dayHighPrice" class="block text-sm font-medium text-info">
                        å½“æ—¥æœ€é«˜é‡‘ä»·ï¼ˆå…ƒ/å…‹ï¼‰<span class="text-gray-500 text-xs">ï¼ˆé€‰å¡«ï¼‰</span>
                    </label>
                    <input 
                        type="number" 
                        id="dayHighPrice" 
                        placeholder="ä¾‹ï¼š487.50" 
                        step="0.01" 
                        min="0"
                        class="w-full px-4 py-2 border border-info/30 rounded-lg input-focus"
                    >
                </div>
                <div class="space-y-2 sm:col-span-2 lg:col-span-1">
                    <label for="dayLowPrice" class="block text-sm font-medium text-info">
                        å½“æ—¥æœ€ä½é‡‘ä»·ï¼ˆå…ƒ/å…‹ï¼‰<span class="text-gray-500 text-xs">ï¼ˆé€‰å¡«ï¼‰</span>
                    </label>
                    <input 
                        type="number" 
                        id="dayLowPrice" 
                        placeholder="ä¾‹ï¼š483.80" 
                        step="0.01" 
                        min="0"
                        class="w-full px-4 py-2 border border-info/30 rounded-lg input-focus"
                    >
                </div>

                <!-- è‡ªå®šä¹‰æŒ‚å•ç›®æ ‡ï¼ˆé€‰å¡«ï¼Œå¡«å†™åˆ™æµ‹ç®—ç›®æ ‡ç›ˆäºï¼‰ -->
                <div class="space-y-2 sm:col-span-2 lg:col-span-1">
                    <label for="targetProfitPrice" class="block text-sm font-medium text-success">
                        è‡ªå®šä¹‰æ­¢ç›ˆé‡‘ä»·ï¼ˆå…ƒ/å…‹ï¼‰<span class="text-gray-500 text-xs">ï¼ˆé€‰å¡«ï¼‰</span>
                    </label>
                    <input 
                        type="number" 
                        id="targetProfitPrice" 
                        placeholder="ä¾‹ï¼š486.50" 
                        step="0.01" 
                        min="0"
                        class="w-full px-4 py-2 border border-success/30 rounded-lg input-focus"
                    >
                </div>
                <div class="space-y-2 sm:col-span-2 lg:col-span-1">
                    <label for="targetLossPrice" class="block text-sm font-medium text-danger">
                        è‡ªå®šä¹‰æ­¢æŸé‡‘ä»·ï¼ˆå…ƒ/å…‹ï¼‰<span class="text-gray-500 text-xs">ï¼ˆé€‰å¡«ï¼‰</span>
                    </label>
                    <input 
                        type="number" 
                        id="targetLossPrice" 
                        placeholder="ä¾‹ï¼š484.50" 
                        step="0.01" 
                        min="0"
                        class="w-full px-4 py-2 border border-danger/30 rounded-lg input-focus"
                    >
                </div>

                <!-- è®¡ç®—æŒ‰é’® -->
                <div class="lg:col-span-3 pt-2">
                    <button 
                        type="submit" 
                        class="w-full bg-primary hover:bg-primary/90 text-white font-medium py-3 px-6 rounded-lg transition-colors flex items-center justify-center gap-2"
                    >
                        <i class="fa fa-calculator"></i> è®¡ç®—å®ç›˜ç›ˆäº
                    </button>
                </div>
            </form>

            <!-- åŸºç¡€å»ºä»“ç»“æœ -->
            <div id="baseResultCard" class="mt-8 hidden">
                <div class="border-t border-gray-200 pt-6">
                    <h3 class="text-lg font-semibold text-neutral mb-4">æ—¥å†…å»ºä»“åŸºç¡€æ•°æ®</h3>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
                        <div class="data-card text-center">
                            <p class="text-sm text-gray-600 mb-1">å®é™…å¯è´­å…‹æ•°</p>
                            <p id="goldGram" class="text-2xl font-bold text-primary">0.000 å…‹</p>
                        </div>
                        <div class="data-card text-center">
                            <p class="text-sm text-gray-600 mb-1">å»ºä»“æ‰‹ç»­è´¹</p>
                            <p id="buyFee" class="text-2xl font-bold text-secondary">Â¥ 0.00</p>
                        </div>
                        <div class="data-card text-center">
                            <p class="text-sm text-gray-600 mb-1">æŒä»“æˆæœ¬ä»·ï¼ˆå«å»ºä»“è´¹ï¼‰</p>
                            <p id="costPrice" class="text-2xl font-bold text-neutral">Â¥ 0.00 /å…‹</p>
                        </div>
                        <div class="data-card text-center">
                            <p class="text-sm text-gray-600 mb-1">ç›ˆäºå¹³è¡¡ç‚¹é‡‘ä»·</p>
                            <p id="breakEvenPrice" class="text-2xl font-bold text-info">Â¥ 0.00 /å…‹</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- å½“æ—¥å®ç›˜æå€¼ç›ˆäºæµ‹ç®—ï¼ˆå¡«å†™æœ€é«˜/æœ€ä½ä»·åˆ™æ˜¾ç¤ºï¼‰ -->
        <div id="realDataCard" class="bg-white rounded-lg p-6 sm:p-8 card-shadow mb-8 hidden">
            <h2 class="text-xl font-semibold text-info mb-6 pb-2 border-b border-info/20 flex items-center">
                <i class="fa fa-bar-chart mr-2"></i> å½“æ—¥å®ç›˜æå€¼ç›ˆäºæµ‹ç®—
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                <div class="data-card text-center">
                    <p class="text-sm text-gray-600 mb-1">æ—¥å†…å®é™…æ³¢åŠ¨å¹…åº¦</p>
                    <p id="dayVolatility" class="text-2xl font-bold text-info">0.00%</p>
                </div>
                <div class="data-card text-center bg-success/5 border-success/20">
                    <p class="text-sm text-success mb-1">å½“æ—¥æœ€å¤§å¯ç›ˆåˆ©</p>
                    <p id="maxProfit" class="text-2xl font-bold text-success">Â¥ 0.00 (+0.00%)</p>
                </div>
                <div class="data-card text-center bg-danger/5 border-danger/20">
                    <p class="text-sm text-danger mb-1">å½“æ—¥æœ€å¤§å¯äºæŸ</p>
                    <p id="maxLoss" class="text-2xl font-bold text-danger">Â¥ 0.00 (-0.00%)</p>
                </div>
            </div>
            <div class="text-xs text-gray-500 text-center">
                ğŸ’¡ æœ€å¤§ç›ˆåˆ©=å»ºä»“ä»·ä¹°â†’å½“æ—¥æœ€é«˜ä»·å–ï¼›æœ€å¤§äºæŸ=å»ºä»“ä»·ä¹°â†’å½“æ—¥æœ€ä½ä»·å–ï¼ˆå‡è®¡å…¥å–å‡ºæ‰‹ç»­è´¹ï¼‰
            </div>
        </div>

        <!-- è‡ªå®šä¹‰ç›®æ ‡æŒ‚å•ç›ˆäºæµ‹ç®—ï¼ˆå¡«å†™æ­¢ç›ˆ/æ­¢æŸä»·åˆ™æ˜¾ç¤ºï¼‰ -->
        <div id="targetDataCard" class="bg-white rounded-lg p-6 sm:p-8 card-shadow hidden">
            <h2 class="text-xl font-semibold text-neutral mb-6 pb-2 border-b border-gray-200 flex items-center">
                <i class="fa fa-crosshairs mr-2"></i> è‡ªå®šä¹‰ç›®æ ‡æŒ‚å•ç›ˆäºæµ‹ç®—
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- æ­¢ç›ˆç›®æ ‡ -->
                <div class="data-card border-success/20" id="profitTargetCard" style="display: none;">
                    <h4 class="text-sm font-medium text-success mb-3 flex items-center"><i class="fa fa-arrow-up mr-1"></i> æ­¢ç›ˆç›®æ ‡æµ‹ç®—</h4>
                    <div class="grid grid-cols-2 gap-3">
                        <div>
                            <p class="text-xs text-gray-600">æ­¢ç›ˆé‡‘ä»·</p>
                            <p id="tProfitPrice" class="font-bold">Â¥ 0.00 /å…‹</p>
                        </div>
                        <div>
                            <p class="text-xs text-gray-600">æ­¢ç›ˆæ¶¨å¹…</p>
                            <p id="tProfitRate" class="font-bold text-success">+0.00%</p>
                        </div>
                        <div>
                            <p class="text-xs text-gray-600">å–å‡ºæ‰‹ç»­è´¹</p>
                            <p id="tProfitSellFee" class="font-bold">Â¥ 0.00</p>
                        </div>
                        <div>
                            <p class="text-xs text-gray-600">å®é™…ç›ˆåˆ©</p>
                            <p id="tProfitAmount" class="font-bold text-success">Â¥ 0.00</p>
                        </div>
                    </div>
                </div>
                <!-- æ­¢æŸç›®æ ‡ -->
                <div class="data-card border-danger/20" id="lossTargetCard" style="display: none;">
                    <h4 class="text-sm font-medium text-danger mb-3 flex items-center"><i class="fa fa-arrow-down mr-1"></i> æ­¢æŸç›®æ ‡æµ‹ç®—</h4>
                    <div class="grid grid-cols-2 gap-3">
                        <div>
                            <p class="text-xs text-gray-600">æ­¢æŸé‡‘ä»·</p>
                            <p id="tLossPrice" class="font-bold">Â¥ 0.00 /å…‹</p>
                        </div>
                        <div>
                            <p class="text-xs text-gray-600">æ­¢æŸè·Œå¹…</p>
                            <p id="tLossRate" class="font-bold text-danger">-0.00%</p>
                        </div>
                        <div>
                            <p class="text-xs text-gray-600">å–å‡ºæ‰‹ç»­è´¹</p>
                            <p id="tLossSellFee" class="font-bold">Â¥ 0.00</p>
                        </div>
                        <div>
                            <p class="text-xs text-gray-600">å®é™…äºæŸ</p>
                            <p id="tLossAmount" class="font-bold text-danger">Â¥ 0.00</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- åº•éƒ¨å®ç›˜è§„åˆ™è¯´æ˜ -->
        <footer class="mt-10 text-center text-sm text-gray-500">
            <p>â‘  æ‰‹ç»­è´¹è§„åˆ™ï¼šä¸»æµé“¶è¡Œï¼ˆæµ™å•†/å·¥è¡Œ/å»ºè¡Œï¼‰é»„é‡‘æ—¥å†…äº¤æ˜“<span class="font-medium">å•è¾¹0.5%</span>ï¼Œä¹°å–åŒå‘æ”¶å–ï¼Œå·¥å…·å·²è‡ªåŠ¨è®¡ç®—ï¼›</p>
            <p class="mt-1">â‘¡ ç›ˆäºå¹³è¡¡ç‚¹ï¼šå½“æ—¥æ¶¨åˆ°è¯¥ä»·æ ¼å–å‡ºï¼Œæ‰£é™¤åŒå‘æ‰‹ç»­è´¹åä¸èµšä¸äºï¼Œæ˜¯å®ç›˜äº¤æ˜“çš„åŸºç¡€å‚è€ƒï¼›</p>
            <p class="mt-1">â‘¢ å®ç›˜æå€¼ï¼šå½“æ—¥æœ€é«˜/æœ€ä½ä»·ä»¥ä¸Šæµ·é‡‘äº¤æ‰€/é“¶è¡ŒAPPå®æ—¶è¡Œæƒ…ä¸ºå‡†ï¼Œæµ‹ç®—ç»“æœä¸ºå½“æ—¥ç†è®ºæœ€å¤§ç›ˆäºï¼›</p>
            <p class="mt-1">â‘£ è®¡ç®—ç²¾åº¦ï¼šå…‹æ•°ä¿ç•™3ä½å°æ•°ï¼Œé‡‘é¢ä¿ç•™2ä½å°æ•°ï¼Œä¸é“¶è¡Œå®ç›˜äº¤æ˜“ç²¾åº¦ä¸€è‡´ã€‚</p>
        </footer>
    </div>

    <script>
        // æ ¸å¿ƒå®ç›˜è®¡ç®—é€»è¾‘ï¼ˆè®¡å…¥åŒå‘æ‰‹ç»­è´¹ï¼Œè´´åˆé“¶è¡Œè§„åˆ™ï¼‰
        document.getElementById('goldForm').addEventListener('submit', function(e) {
            e.preventDefault();
            // è·å–æ‰€æœ‰è¾“å…¥å€¼å¹¶è½¬æ¢ä¸ºæ•°å­—
            const buyPrice = parseFloat(document.getElementById('buyPrice').value);
            const buyAmount = parseFloat(document.getElementById('buyAmount').value);
            const feeRate = parseFloat(document.getElementById('feeRate').value) / 100;
            const dayHighPrice = parseFloat(document.getElementById('dayHighPrice').value) || 0;
            const dayLowPrice = parseFloat(document.getElementById('dayLowPrice').value) || 0;
            const targetProfitPrice = parseFloat(document.getElementById('targetProfitPrice').value) || 0;
            const targetLossPrice = parseFloat(document.getElementById('targetLossPrice').value) || 0;

            // åŸºç¡€æ ¡éªŒ
            if (isNaN(buyPrice) || buyPrice <= 0 || isNaN(buyAmount) || buyAmount <= 0 || isNaN(feeRate) || feeRate < 0) {
                alert('è¯·è¾“å…¥æœ‰æ•ˆçš„æ­£æ•°ï¼å»ºä»“ä»·å’Œæœ¬é‡‘ä¸å¯ä¸º0');
                return;
            }

            // ************************** åŸºç¡€å»ºä»“è®¡ç®—ï¼ˆæ ¸å¿ƒï¼Œè®¡å…¥å»ºä»“æ‰‹ç»­è´¹ï¼‰ **************************
            const buyFee = (buyAmount * feeRate).toFixed(2); // å»ºä»“æ‰‹ç»­è´¹ï¼ˆå•è¾¹ï¼‰
            const actualFund = buyAmount - Number(buyFee); // æ‰£å»ºä»“è´¹åå®é™…å¯ç”¨èµ„é‡‘
            const goldGram = (actualFund / buyPrice).toFixed(3); // å®é™…å¯è´­å…‹æ•°ï¼ˆ3ä½å°æ•°ï¼‰
            const costPrice = (buyAmount / Number(goldGram)).toFixed(2); // æŒä»“æˆæœ¬ä»·ï¼ˆå«å»ºä»“è´¹ï¼‰
            // ç›ˆäºå¹³è¡¡ç‚¹é‡‘ä»·ï¼šæ‰£é™¤åŒå‘æ‰‹ç»­è´¹åä¸èµšä¸äºçš„å–å‡ºä»· = æˆæœ¬ä»· / (1 - feeRate)
            const breakEvenPrice = (Number(costPrice) / (1 - feeRate)).toFixed(2);

            // æ¸²æŸ“åŸºç¡€å»ºä»“ç»“æœ
            document.getElementById('baseResultCard').classList.remove('hidden');
            document.getElementById('goldGram').textContent = goldGram + ' å…‹';
            document.getElementById('buyFee').textContent = 'Â¥ ' + buyFee;
            document.getElementById('costPrice').textContent = 'Â¥ ' + costPrice + ' /å…‹';
            document.getElementById('breakEvenPrice').textContent = 'Â¥ ' + breakEvenPrice + ' /å…‹';

            // ************************** å½“æ—¥å®ç›˜æå€¼ç›ˆäºè®¡ç®—ï¼ˆå¡«å†™æœ€é«˜/æœ€ä½ä»·åˆ™æ‰§è¡Œï¼‰ **************************
            if (dayHighPrice > 0 || dayLowPrice > 0) {
                document.getElementById('realDataCard').classList.remove('hidden');
                // è®¡ç®—æ—¥å†…å®é™…æ³¢åŠ¨å¹…åº¦ï¼ˆ(æœ€é«˜ä»·-æœ€ä½ä»·)/å»ºä»“ä»· *100%ï¼‰
                let dayVolatility = 0;
                if (dayHighPrice > 0 && dayLowPrice > 0 && dayHighPrice >= dayLowPrice) {
                    dayVolatility = ((dayHighPrice - dayLowPrice) / buyPrice * 100).toFixed(2);
                }
                document.getElementById('dayVolatility').textContent = dayVolatility + '%';

                // å½“æ—¥æœ€å¤§ç›ˆåˆ©ï¼ˆå»ºä»“ä»·ä¹°â†’å½“æ—¥æœ€é«˜ä»·å–ï¼Œè®¡å…¥å–å‡ºæ‰‹ç»­è´¹ï¼‰
                let maxProfit = 0, maxProfitRate = 0;
                if (dayHighPrice > 0) {
                    const sellTotal = (dayHighPrice * Number(goldGram)).toFixed(2); // æœ€é«˜ä»·å–å‡ºæ€»é‡‘é¢
                    const sellFee = (Number(sellTotal) * feeRate).toFixed(2); // å–å‡ºæ‰‹ç»­è´¹
                    maxProfit = (Number(sellTotal) - Number(sellFee) - buyAmount).toFixed(2); // å®é™…ç›ˆåˆ©=å–å‡ºå‡€é¢-å»ºä»“æ€»é‡‘é¢
                    maxProfitRate = ((Number(maxProfit) / buyAmount) * 100).toFixed(2);
                }
                document.getElementById('maxProfit').textContent = `Â¥ ${maxProfit} (${maxProfitRate > 0 ? '+' : ''}${maxProfitRate}%)`;

                // å½“æ—¥æœ€å¤§äºæŸï¼ˆå»ºä»“ä»·ä¹°â†’å½“æ—¥æœ€ä½ä»·å–ï¼Œè®¡å…¥å–å‡ºæ‰‹ç»­è´¹ï¼‰
                let maxLoss = 0, maxLossRate = 0;
                if (dayLowPrice > 0) {
                    const sellTotal = (dayLowPrice * Number(goldGram)).toFixed(2); // æœ€ä½ä»·å–å‡ºæ€»é‡‘é¢
                    const sellFee = (Number(sellTotal) * feeRate).toFixed(2); // å–å‡ºæ‰‹ç»­è´¹
                    maxLoss = (Number(sellTotal) - Number(sellFee) - buyAmount).toFixed(2); // å®é™…äºæŸ=å–å‡ºå‡€é¢-å»ºä»“æ€»é‡‘é¢
                    maxLossRate = ((Number(maxLoss) / buyAmount) * 100).toFixed(2);
                }
                document.getElementById('maxLoss').textContent = `Â¥ ${maxLoss} (${maxLossRate}%)`;
            }

            // ************************** è‡ªå®šä¹‰ç›®æ ‡æŒ‚å•è®¡ç®—ï¼ˆå¡«å†™æ­¢ç›ˆ/æ­¢æŸä»·åˆ™æ‰§è¡Œï¼‰ **************************
            let showTargetCard = false;
            // è‡ªå®šä¹‰æ­¢ç›ˆç›®æ ‡è®¡ç®—
            if (targetProfitPrice > 0) {
                showTargetCard = true;
                document.getElementById('profitTargetCard').style.display = 'block';
                const profitRate = (((targetProfitPrice - buyPrice) / buyPrice) * 100).toFixed(2); // æ­¢ç›ˆæ¶¨å¹…
                const sellTotal = (targetProfitPrice * Number(goldGram)).toFixed(2); // æ­¢ç›ˆå–å‡ºæ€»é‡‘é¢
                const sellFee = (Number(sellTotal) * feeRate).toFixed(2); // å–å‡ºæ‰‹ç»­è´¹
                const profitAmount = (Number(sellTotal) - Number(sellFee) - buyAmount).toFixed(2); // å®é™…ç›ˆåˆ©

                document.getElementById('tProfitPrice').textContent = 'Â¥ ' + targetProfitPrice + ' /å…‹';
                document.getElementById('tProfitRate').textContent = '+' + profitRate + '%';
                document.getElementById('tProfitSellFee').textContent = 'Â¥ ' + sellFee;
                document.getElementById('tProfitAmount').textContent = 'Â¥ ' + profitAmount;
            }

            // è‡ªå®šä¹‰æ­¢æŸç›®æ ‡è®¡ç®—
            if (targetLossPrice > 0) {
                showTargetCard = true;
                document.getElementById('lossTargetCard').style.display = 'block';
                const lossRate = (((targetLossPrice - buyPrice) / buyPrice) * 100).toFixed(2); // æ­¢æŸè·Œå¹…
                const sellTotal = (targetLossPrice * Number(goldGram)).toFixed(2); // æ­¢æŸå–å‡ºæ€»é‡‘é¢
                const sellFee = (Number(sellTotal) * feeRate).toFixed(2); // å–å‡ºæ‰‹ç»­è´¹
                const lossAmount = (Number(sellTotal) - Number(sellFee) - buyAmount).toFixed(2); // å®é™…äºæŸ

                document.getElementById('tLossPrice').textContent = 'Â¥ ' + targetLossPrice + ' /å…‹';
                document.getElementById('tLossRate').textContent = lossRate + '%';
                document.getElementById('tLossSellFee').textContent = 'Â¥ ' + sellFee;
                document.getElementById('tLossAmount').textContent = 'Â¥ ' + lossAmount;
            }

            // æ˜¾ç¤ºè‡ªå®šä¹‰ç›®æ ‡å¡ç‰‡
            if (showTargetCard) {
                document.getElementById('targetDataCard').classList.remove('hidden');
            }

            // è‡ªåŠ¨æ»šåŠ¨åˆ°ç»“æœåŒºåŸŸ
            document.getElementById('baseResultCard').scrollIntoView({ behavior: 'smooth' });
        });
    </script>
</body>
</html>