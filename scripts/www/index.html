<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é»„é‡‘æŠ•èµ„åˆ©æ¶¦è®¡ç®—å™¨</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#D4AF37', // é»„é‡‘ä¸»è‰²
                        secondary: '#854D0E', // é‡‘è‰²è¾…åŠ©è‰²
                        danger: '#DC2626', // é•¿æœŸæ­¢æŸ/äºæŸçº¢è‰²
                        success: '#16A34A', // é•¿æœŸæ­¢ç›ˆ/ç›ˆåˆ©ç»¿è‰²
                        day: '#F59E0B',    // æ—¥å†…ç‚¹ä½ä¸“å±é»„è‰²ï¼ˆçŸ­çº¿æ ¸å¿ƒï¼‰
                        neutral: '#1F2937', // æ·±è‰²æ–‡å­—
                        info: '#2563EB',   // å®ç›˜æ•°æ®/æ³¢åŠ¨å¹…åº¦
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .card-shadow {
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            }
            .input-focus {
                @apply focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none;
            }
            .table-hover {
                @apply hover:bg-gray-50 transition-colors;
            }
            .long-point { /* é•¿æœŸç‚¹ä½æ ·å¼ */
                @apply font-bold border-2 border-danger bg-danger/5;
            }
            .day-point { /* æ—¥å†…ç‚¹ä½æ ·å¼ï¼ˆçŸ­çº¿æ ¸å¿ƒï¼‰ */
                @apply font-bold border-2 border-day bg-day/5;
            }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen py-8 px-4 sm:px-6 lg:px-8">
    <div class="max-w-4xl mx-auto">
        <!-- é¡µé¢æ ‡é¢˜+å®ç›˜æç¤º -->
        <header class="text-center mb-10">
            <h1 class="text-[clamp(1.8rem,4vw,2.5rem)] font-bold text-neutral flex items-center justify-center gap-2">
                <i class="fa fa-line-chart text-primary"></i> é»„é‡‘æ—¥å†…å®ç›˜ç›ˆäºè®¡ç®—å™¨
            </h1>
            <p class="text-gray-600 mt-2">å½“å¤©ä¹°å½“å¤©å– | å®ç›˜æå€¼æµ‹ç®— | è‡ªå®šä¹‰ç›®æ ‡æŒ‚å•</p>
            <div class="mt-3 flex flex-wrap justify-center gap-2 text-sm py-2 px-4 bg-info/5 rounded-lg border border-info/20">
                <span class="text-info font-medium flex items-center"><i class="fa fa-bar-chart mr-1"></i> å®ç›˜æå€¼ï¼šå½“æ—¥æœ€é«˜/æœ€ä½ä»·æµ‹ç®—å®é™…ç›ˆäº</span>
                <span class="text-neutral/70 font-medium flex items-center"><i class="fa fa-crosshairs mr-1"></i> è‡ªå®šä¹‰ç›®æ ‡ï¼šæ‰‹åŠ¨æŒ‚å•æ­¢ç›ˆ/æ­¢æŸä»·æµ‹ç®—</span>
            </div>
            <p class="text-xs text-day mt-1 font-medium">ğŸ’¡ æ—¥å†…çŸ­çº¿ï¼šä¸»æ­¢ç›ˆ1% | æ¿€è¿›æ­¢ç›ˆ1.5% | æ­¢æŸ0.5% | é•¿æœŸå‚è€ƒï¼šæ­¢ç›ˆ8% | æ­¢æŸ5%</p>
            <p class="text-xs text-gray-500 mt-2">ğŸ’¡ è®¡å…¥é“¶è¡ŒåŒå‘æ‰‹ç»­è´¹ï¼Œç»“æœè´´åˆå®ç›˜äº¤æ˜“</p>
        </header>

        <!-- å½“å‰ä»·æ ¼æ›´æ–° -->
        <div class="bg-white rounded-lg p-6 sm:p-8 card-shadow mb-8">
            <h2 class="text-xl font-semibold text-neutral mb-6 pb-2 border-b border-gray-200">å½“å‰é»„é‡‘ä»·æ ¼</h2>
            <div class="flex flex-col md:flex-row items-center justify-between gap-6">
                <div class="flex-1 text-center">
                    <p class="text-sm text-gray-600 mb-1">å½“å‰å‚è€ƒä»·æ ¼</p>
                    <p id="current-price" class="text-3xl font-bold text-primary">420.00 å…ƒ/å…‹</p>
                    <p id="update-time" class="text-sm text-gray-500 mt-1">æ›´æ–°æ—¶é—´ï¼šåŠ è½½ä¸­</p>
                </div>
                <div class="flex flex-col gap-4">
                    <!-- æ‰‹åŠ¨æ›´æ–°ä»·æ ¼åŠŸèƒ½ -->
                    <div class="w-full md:w-64">
                        <label for="manual-price" class="block text-sm font-medium text-gray-700 mb-2">
                            æ‰‹åŠ¨æ›´æ–°ä»·æ ¼ï¼ˆå…ƒ/å…‹ï¼‰
                        </label>
                        <div class="flex gap-2">
                            <input 
                                type="number" 
                                id="manual-price" 
                                step="0.01" 
                                placeholder="è¯·è¾“å…¥æœ€æ–°ä»·æ ¼" 
                                class="flex-1 px-4 py-2 border border-gray-300 rounded-lg input-focus"
                            >
                            <button 
                                onclick="updateManualPrice()" 
                                class="px-4 py-2 bg-primary hover:bg-primary/90 text-white rounded-lg transition-colors"
                            >
                                æ›´æ–°
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- è¾“å…¥è¡¨å•å¡ç‰‡ -->
        <div class="bg-white rounded-lg p-6 sm:p-8 card-shadow mb-8">
            <h2 class="text-xl font-semibold text-neutral mb-6 pb-2 border-b border-gray-200">æ—¥å†…äº¤æ˜“æ ¸å¿ƒä¿¡æ¯</h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- åŸºç¡€å»ºä»“ä¿¡æ¯ï¼ˆå¿…å¡«ï¼‰ -->
                <div class="space-y-2">
                    <label for="buy-price" class="block text-sm font-medium text-gray-700">
                        å»ºä»“é‡‘ä»·ï¼ˆå…ƒ/å…‹ï¼‰<span class="text-danger">*</span>
                    </label>
                    <input 
                        type="number" 
                        id="buy-price" 
                        step="0.01" 
                        placeholder="è¯·è¾“å…¥å»ºä»“ä»·æ ¼" 
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus"
                    >
                </div>
                <div class="space-y-2">
                    <label for="invest-amount" class="block text-sm font-medium text-gray-700">
                        å»ºä»“æ€»é‡‘é¢ï¼ˆå…ƒï¼‰<span class="text-danger">*</span>
                    </label>
                    <input 
                        type="number" 
                        id="invest-amount" 
                        step="1" 
                        placeholder="è¯·è¾“å…¥å»ºä»“é‡‘é¢" 
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus"
                    >
                </div>
                <div class="space-y-2 lg:col-span-3">
                    <label for="trading-fee" class="block text-sm font-medium text-gray-700">
                        å•è¾¹æ‰‹ç»­è´¹æ¯”ä¾‹ï¼ˆ%ï¼‰<span class="text-gray-500 text-xs">ï¼ˆä¸»æµé“¶è¡Œ0.5%ï¼ŒåŒå‘æ”¶å–è‡ªåŠ¨è®¡ç®—ï¼‰</span>
                    </label>
                    <input 
                        type="number" 
                        id="trading-fee" 
                        step="0.01" 
                        value="0.5" 
                        placeholder="è¯·è¾“å…¥æ‰‹ç»­è´¹ç‡" 
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus"
                    >
                </div>

                <!-- å½“æ—¥å®ç›˜æå€¼ï¼ˆé€‰å¡«ï¼Œå¡«å†™åˆ™æµ‹ç®—å®ç›˜ç›ˆäºï¼‰ -->
                <div class="space-y-2 sm:col-span-2 lg:col-span-1">
                    <label for="day-high-price" class="block text-sm font-medium text-info">
                        å½“æ—¥æœ€é«˜é‡‘ä»·ï¼ˆå…ƒ/å…‹ï¼‰<span class="text-gray-500 text-xs">ï¼ˆé€‰å¡«ï¼‰</span>
                    </label>
                    <input 
                        type="number" 
                        id="day-high-price" 
                        step="0.01" 
                        placeholder="ä¾‹ï¼š487.50" 
                        class="w-full px-4 py-2 border border-info/30 rounded-lg input-focus"
                    >
                </div>
                <div class="space-y-2 sm:col-span-2 lg:col-span-1">
                    <label for="day-low-price" class="block text-sm font-medium text-info">
                        å½“æ—¥æœ€ä½é‡‘ä»·ï¼ˆå…ƒ/å…‹ï¼‰<span class="text-gray-500 text-xs">ï¼ˆé€‰å¡«ï¼‰</span>
                    </label>
                    <input 
                        type="number" 
                        id="day-low-price" 
                        step="0.01" 
                        placeholder="ä¾‹ï¼š483.80" 
                        class="w-full px-4 py-2 border border-info/30 rounded-lg input-focus"
                    >
                </div>

                <!-- è‡ªå®šä¹‰æŒ‚å•ç›®æ ‡ï¼ˆé€‰å¡«ï¼Œå¡«å†™åˆ™æµ‹ç®—ç›®æ ‡ç›ˆäºï¼‰ -->
                <div class="space-y-2 sm:col-span-2 lg:col-span-1">
                    <label for="target-profit-price" class="block text-sm font-medium text-success">
                        è‡ªå®šä¹‰æ­¢ç›ˆé‡‘ä»·ï¼ˆå…ƒ/å…‹ï¼‰<span class="text-gray-500 text-xs">ï¼ˆé€‰å¡«ï¼‰</span>
                    </label>
                    <input 
                        type="number" 
                        id="target-profit-price" 
                        step="0.01" 
                        placeholder="ä¾‹ï¼š486.50" 
                        class="w-full px-4 py-2 border border-success/30 rounded-lg input-focus"
                    >
                </div>
                <div class="space-y-2 sm:col-span-2 lg:col-span-1">
                    <label for="target-loss-price" class="block text-sm font-medium text-danger">
                        è‡ªå®šä¹‰æ­¢æŸé‡‘ä»·ï¼ˆå…ƒ/å…‹ï¼‰<span class="text-gray-500 text-xs">ï¼ˆé€‰å¡«ï¼‰</span>
                    </label>
                    <input 
                        type="number" 
                        id="target-loss-price" 
                        step="0.01" 
                        placeholder="ä¾‹ï¼š484.50" 
                        class="w-full px-4 py-2 border border-danger/30 rounded-lg input-focus"
                    >
                </div>
            </div>

            <!-- åŸºç¡€å»ºä»“ç»“æœ -->
            <div id="baseResultCard" class="mt-8">
                <div class="border-t border-gray-200 pt-6">
                    <h3 class="text-lg font-semibold text-neutral mb-4">æ—¥å†…å»ºä»“åŸºç¡€æ•°æ®</h3>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
                        <div class="bg-gray-50 rounded-lg p-4 text-center">
                            <p class="text-sm text-gray-600 mb-1">å®é™…å¯è´­å…‹æ•°</p>
                            <p id="gold-weight" class="text-2xl font-bold text-primary">0.000 å…‹</p>
                        </div>
                        <div class="bg-gray-50 rounded-lg p-4 text-center">
                            <p class="text-sm text-gray-600 mb-1">å»ºä»“æ‰‹ç»­è´¹</p>
                            <p id="trading-fee-amount" class="text-2xl font-bold text-secondary">Â¥ 0.00</p>
                        </div>
                        <div class="bg-gray-50 rounded-lg p-4 text-center">
                            <p class="text-sm text-gray-600 mb-1">æŒä»“æˆæœ¬ä»·ï¼ˆå«å»ºä»“è´¹ï¼‰</p>
                            <p id="cost-price" class="text-2xl font-bold text-neutral">Â¥ 0.00 /å…‹</p>
                        </div>
                        <div class="bg-gray-50 rounded-lg p-4 text-center">
                            <p class="text-sm text-gray-600 mb-1">ç›ˆäºå¹³è¡¡ç‚¹é‡‘ä»·</p>
                            <p id="break-even-price" class="text-2xl font-bold text-info">Â¥ 0.00 /å…‹</p>
                        </div>
                    </div>
                    
                    <!-- åŸæœ‰çš„è®¡ç®—ç»“æœ -->
                    <div class="mt-6">
                        <h3 class="text-lg font-semibold text-neutral mb-4">å½“å‰å¸‚åœºä»·å€¼</h3>
                        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 text-center">
                            <div class="bg-gray-50 rounded-lg p-4">
                                <p class="text-sm text-gray-600 mb-1">å½“å‰ä»·å€¼</p>
                                <p id="current-value" class="text-2xl font-bold text-secondary">Â¥ 0.00</p>
                            </div>
                            <div class="bg-gray-50 rounded-lg p-4">
                                <p class="text-sm text-gray-600 mb-1">æŠ•èµ„æ”¶ç›Š</p>
                                <p id="profit" class="text-2xl font-bold">Â¥ 0.00</p>
                            </div>
                            <div class="bg-gray-50 rounded-lg p-4">
                                <p class="text-sm text-gray-600 mb-1">æ”¶ç›Šç‡</p>
                                <p id="profit-rate" class="text-xl font-bold">0.00%</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- å½“æ—¥å®ç›˜æå€¼ç›ˆäºæµ‹ç®—ï¼ˆå¡«å†™æœ€é«˜/æœ€ä½ä»·åˆ™æ˜¾ç¤ºï¼‰ -->
        <div id="realDataCard" class="bg-white rounded-lg p-6 sm:p-8 card-shadow mb-8">
            <h2 class="text-xl font-semibold text-info mb-6 pb-2 border-b border-info/20 flex items-center">
                <i class="fa fa-bar-chart mr-2"></i> å½“æ—¥å®ç›˜æå€¼ç›ˆäºæµ‹ç®—
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                <div class="bg-gray-50 rounded-lg p-4 text-center">
                    <p class="text-sm text-gray-600 mb-1">æ—¥å†…å®é™…æ³¢åŠ¨å¹…åº¦</p>
                    <p id="day-volatility" class="text-2xl font-bold text-info">0.00%</p>
                </div>
                <div class="bg-success/5 rounded-lg p-4 text-center border border-success/20">
                    <p class="text-sm text-success mb-1">å½“æ—¥æœ€å¤§å¯ç›ˆåˆ©</p>
                    <p id="max-profit" class="text-2xl font-bold text-success">Â¥ 0.00 (+0.00%)</p>
                </div>
                <div class="bg-danger/5 rounded-lg p-4 text-center border border-danger/20">
                    <p class="text-sm text-danger mb-1">å½“æ—¥æœ€å¤§å¯äºæŸ</p>
                    <p id="max-loss" class="text-2xl font-bold text-danger">Â¥ 0.00 (-0.00%)</p>
                </div>
            </div>
            <div class="text-xs text-gray-500 text-center">
                ğŸ’¡ æœ€å¤§ç›ˆåˆ©=å»ºä»“ä»·ä¹°â†’å½“æ—¥æœ€é«˜ä»·å–ï¼›æœ€å¤§äºæŸ=å»ºä»“ä»·ä¹°â†’å½“æ—¥æœ€ä½ä»·å–ï¼ˆå‡è®¡å…¥å–å‡ºæ‰‹ç»­è´¹ï¼‰
            </div>
        </div>

        <!-- ç›ˆåˆ©æ¸…å•å¡ç‰‡ -->
        <div class="bg-white rounded-lg p-6 sm:p-8 card-shadow mb-8">
            <h2 class="text-xl font-semibold text-neutral mb-6 pb-2 border-b border-gray-200 flex items-center justify-between">
                <span><i class="fa fa-arrow-up text-success mr-2"></i> ç›ˆåˆ©æ¸…å•ï¼ˆæ¶¨ä»·å¹…åº¦ï¼‰</span>
                <span class="text-sm flex flex-col md:flex-row gap-2">
                    <span class="text-day font-medium">ğŸ“Œ æ—¥å†…ä¸»æ­¢ç›ˆã€+1%ã€‘</span>
                    <span class="text-day font-medium">ğŸ“Œ æ—¥å†…æ¿€è¿›æ­¢ç›ˆã€+1.5%ã€‘</span>
                    <span class="text-success font-medium">ğŸ“Œ é•¿æœŸæ­¢ç›ˆã€+8%ã€‘</span>
                </span>
            </h2>
            <div class="overflow-x-auto">
                <table class="w-full text-sm text-left min-w-[600px]">
                    <thead class="bg-gray-50 text-gray-700">
                        <tr>
                            <th class="px-3 py-2 rounded-l-lg whitespace-nowrap">æ¶¨å¹…</th>
                            <th class="px-3 py-2 whitespace-nowrap">å–å‡ºä»·æ ¼</th>
                            <th class="px-3 py-2 whitespace-nowrap hidden sm:table-cell">æ€»ä»·å€¼</th>
                            <th class="px-3 py-2 whitespace-nowrap">ç›ˆåˆ©</th>
                            <th class="px-3 py-2 rounded-r-lg whitespace-nowrap">æ”¶ç›Šç‡</th>
                        </tr>
                    </thead>
                    <tbody id="profit-table" class="divide-y divide-gray-200">
                        <!-- ç›ˆåˆ©æ•°æ®é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- äºæŸæ¸…å•å¡ç‰‡ -->
        <div class="bg-white rounded-lg p-6 sm:p-8 card-shadow mb-8">
            <h2 class="text-xl font-semibold text-neutral mb-6 pb-2 border-b border-gray-200 flex items-center justify-between">
                <span><i class="fa fa-arrow-down text-danger mr-2"></i> äºæŸæ¸…å•ï¼ˆè·Œä»·å¹…åº¦ï¼‰</span>
                <span class="text-sm flex flex-col md:flex-row gap-2">
                    <span class="text-day font-medium">ğŸ“Œ æ—¥å†…æ­¢æŸã€-0.5%ã€‘</span>
                    <span class="text-danger font-medium">ğŸ“Œ é•¿æœŸæ­¢æŸã€-5%ã€‘</span>
                </span>
            </h2>
            <div class="overflow-x-auto">
                <table class="w-full text-sm text-left min-w-[600px]">
                    <thead class="bg-gray-50 text-gray-700">
                        <tr>
                            <th class="px-3 py-2 rounded-l-lg whitespace-nowrap">è·Œå¹…</th>
                            <th class="px-3 py-2 whitespace-nowrap">å–å‡ºä»·æ ¼</th>
                            <th class="px-3 py-2 whitespace-nowrap hidden sm:table-cell">æ€»ä»·å€¼</th>
                            <th class="px-3 py-2 whitespace-nowrap">äºæŸ</th>
                            <th class="px-3 py-2 rounded-r-lg whitespace-nowrap">äºæŸç‡</th>
                        </tr>
                    </thead>
                    <tbody id="loss-table" class="divide-y divide-gray-200">
                        <!-- äºæŸæ•°æ®é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- è‡ªå®šä¹‰ç›®æ ‡æŒ‚å•ç›ˆäºæµ‹ç®—ï¼ˆå¡«å†™æ­¢ç›ˆ/æ­¢æŸä»·åˆ™æ˜¾ç¤ºï¼‰ -->
        <div id="targetDataCard" class="bg-white rounded-lg p-6 sm:p-8 card-shadow mb-8">
            <h2 class="text-xl font-semibold text-neutral mb-6 pb-2 border-b border-gray-200 flex items-center">
                <i class="fa fa-crosshairs mr-2"></i> è‡ªå®šä¹‰ç›®æ ‡æŒ‚å•ç›ˆäºæµ‹ç®—
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- æ­¢ç›ˆç›®æ ‡ -->
                <div class="bg-gray-50 rounded-lg p-4 border border-success/20" id="profitTargetCard">
                    <h4 class="text-sm font-medium text-success mb-3 flex items-center"><i class="fa fa-arrow-up mr-1"></i> æ­¢ç›ˆç›®æ ‡æµ‹ç®—</h4>
                    <div class="grid grid-cols-2 gap-3">
                        <div>
                            <p class="text-xs text-gray-600">æ­¢ç›ˆé‡‘ä»·</p>
                            <p id="t-profit-price" class="font-bold">Â¥ 0.00 /å…‹</p>
                        </div>
                        <div>
                            <p class="text-xs text-gray-600">æ­¢ç›ˆæ¶¨å¹…</p>
                            <p id="t-profit-rate" class="font-bold text-success">+0.00%</p>
                        </div>
                        <div>
                            <p class="text-xs text-gray-600">å–å‡ºæ‰‹ç»­è´¹</p>
                            <p id="t-profit-sell-fee" class="font-bold">Â¥ 0.00</p>
                        </div>
                        <div>
                            <p class="text-xs text-gray-600">å®é™…ç›ˆåˆ©</p>
                            <p id="t-profit-amount" class="font-bold text-success">Â¥ 0.00</p>
                        </div>
                    </div>
                </div>
                <!-- æ­¢æŸç›®æ ‡ -->
                <div class="bg-gray-50 rounded-lg p-4 border border-danger/20" id="lossTargetCard">
                    <h4 class="text-sm font-medium text-danger mb-3 flex items-center"><i class="fa fa-arrow-down mr-1"></i> æ­¢æŸç›®æ ‡æµ‹ç®—</h4>
                    <div class="grid grid-cols-2 gap-3">
                        <div>
                            <p class="text-xs text-gray-600">æ­¢æŸé‡‘ä»·</p>
                            <p id="t-loss-price" class="font-bold">Â¥ 0.00 /å…‹</p>
                        </div>
                        <div>
                            <p class="text-xs text-gray-600">æ­¢æŸè·Œå¹…</p>
                            <p id="t-loss-rate" class="font-bold text-danger">-0.00%</p>
                        </div>
                        <div>
                            <p class="text-xs text-gray-600">å–å‡ºæ‰‹ç»­è´¹</p>
                            <p id="t-loss-sell-fee" class="font-bold">Â¥ 0.00</p>
                        </div>
                        <div>
                            <p class="text-xs text-gray-600">å®é™…äºæŸ</p>
                            <p id="t-loss-amount" class="font-bold text-danger">Â¥ 0.00</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- äº¤æ˜“å»ºè®® -->
        <div class="bg-white rounded-lg p-6 sm:p-8 card-shadow mb-8">
            <h2 class="text-xl font-semibold text-neutral mb-6 pb-2 border-b border-gray-200">äº¤æ˜“å»ºè®®</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="bg-day/5 rounded-lg p-6 border border-day/30">
                    <h3 class="text-lg font-semibold text-day mb-4 flex items-center gap-2">
                        <i class="fa fa-check-circle"></i> ä¸»æ­¢ç›ˆä»·æ ¼ï¼ˆ1%ï¼‰
                    </h3>
                    <p id="best-sell-price" class="text-3xl font-bold text-day mb-4">0.00 å…ƒ/å…‹</p>
                    <p class="text-gray-600">æ—¥å¸¸æœ€æ˜“è¾¾æˆï¼Œè½è¢‹ä¸ºå®‰çš„æ ¸å¿ƒç›®æ ‡</p>
                </div>
                <div class="bg-day/5 rounded-lg p-6 border border-day/30">
                    <h3 class="text-lg font-semibold text-day mb-4 flex items-center gap-2">
                        <i class="fa fa-check-circle"></i> æ¿€è¿›æ­¢ç›ˆä»·æ ¼ï¼ˆ1.5%ï¼‰
                    </h3>
                    <p id="aggressive-sell-price" class="text-3xl font-bold text-day mb-4">0.00 å…ƒ/å…‹</p>
                    <p class="text-gray-600">è¡Œæƒ…åå¼ºæ—¶çš„è¿›é˜¶ç›®æ ‡ï¼Œå¶å°”å¯è¾¾</p>
                </div>
                <div class="bg-danger/5 rounded-lg p-6 border border-danger/30">
                    <h3 class="text-lg font-semibold text-danger mb-4 flex items-center gap-2">
                        <i class="fa fa-exclamation-triangle"></i> æ­¢æŸä»·æ ¼ï¼ˆ0.5%ï¼‰
                    </h3>
                    <p id="stop-loss-price" class="text-3xl font-bold text-danger mb-4">0.00 å…ƒ/å…‹</p>
                    <p class="text-gray-600">å°æ­¢æŸä¸¥æ§é£é™©ï¼Œç¬¦åˆçŸ­çº¿ "å°äºå¤§èµš" é€»è¾‘</p>
                </div>
            </div>
        </div>

        <!-- æƒå¨ä»·æ ¼æŸ¥è¯¢ -->
        <div class="bg-white rounded-lg p-6 sm:p-8 card-shadow mb-8">
            <h2 class="text-xl font-semibold text-neutral mb-6 pb-2 border-b border-gray-200">æƒå¨ä»·æ ¼æŸ¥è¯¢</h2>
            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <a href="https://www.sge.com.cn/" target="_blank" class="px-6 py-3 bg-primary hover:bg-primary/90 text-white rounded-lg transition-colors flex items-center justify-center gap-2">
                    <i class="fa fa-external-link"></i> ä¸Šæµ·é»„é‡‘äº¤æ˜“æ‰€
                </a>
                <a href="https://cn.investing.com/commodities/real-time-futures" target="_blank" class="px-6 py-3 bg-primary hover:bg-primary/90 text-white rounded-lg transition-colors flex items-center justify-center gap-2">
                    <i class="fa fa-external-link"></i> Investing.com å®æ—¶æœŸè´§
                </a>
            </div>
            <p class="text-center text-sm text-gray-500 mt-4">ç‚¹å‡»ä¸Šæ–¹é“¾æ¥æŸ¥çœ‹æƒå¨çš„é»„é‡‘å®æ—¶ä»·æ ¼</p>
        </div>

        <!-- é£é™©æé†’ -->
        <div class="bg-white rounded-lg p-6 sm:p-8 card-shadow mb-8">
            <h2 class="text-xl font-semibold text-neutral mb-6 pb-2 border-b border-gray-200">é£é™©æé†’</h2>
            <div class="bg-danger/5 rounded-lg p-6 border border-danger/30">
                <h3 class="text-lg font-semibold text-danger mb-4">æŠ•èµ„é£é™©æç¤º</h3>
                <ul class="space-y-2 text-gray-700">
                    <li class="flex items-start gap-2">
                        <i class="fa fa-circle text-xs text-danger mt-1"></i>
                        <span>é»„é‡‘ä»·æ ¼æ³¢åŠ¨è¾ƒå¤§ï¼ŒçŸ­æœŸæŠ•èµ„å­˜åœ¨è¾ƒé«˜é£é™©</span>
                    </li>
                    <li class="flex items-start gap-2">
                        <i class="fa fa-circle text-xs text-danger mt-1"></i>
                        <span>å»ºè®®è®¾ç½®æ­¢æŸç‚¹ï¼Œé¿å…å¤§å¹…äºæŸ</span>
                    </li>
                    <li class="flex items-start gap-2">
                        <i class="fa fa-circle text-xs text-danger mt-1"></i>
                        <span>ä¸è¦è¿‡åº¦æ æ†ï¼Œæ§åˆ¶æŠ•èµ„é‡‘é¢åœ¨å¯æ‰¿å—èŒƒå›´å†…</span>
                    </li>
                    <li class="flex items-start gap-2">
                        <i class="fa fa-circle text-xs text-danger mt-1"></i>
                        <span>å…³æ³¨å›½é™…æ”¿æ²»ç»æµå½¢åŠ¿å¯¹é»„é‡‘ä»·æ ¼çš„å½±å“</span>
                    </li>
                    <li class="flex items-start gap-2">
                        <i class="fa fa-circle text-xs text-danger mt-1"></i>
                        <span>å®šæœŸå…³æ³¨å¸‚åœºåŠ¨æ€ï¼ŒåŠæ—¶è°ƒæ•´æŠ•èµ„ç­–ç•¥</span>
                    </li>
                </ul>
            </div>
        </div>

        <!-- åº•éƒ¨è¯´æ˜ -->
        <footer class="mt-10 text-center text-sm text-gray-500">
            <p>â‘  æ‰‹ç»­è´¹è§„åˆ™ï¼šä¸»æµé“¶è¡Œï¼ˆæµ™å•†/å·¥è¡Œ/å»ºè¡Œï¼‰é»„é‡‘æ—¥å†…äº¤æ˜“<span class="font-medium">å•è¾¹0.5%</span>ï¼Œä¹°å–åŒå‘æ”¶å–ï¼Œå·¥å…·å·²è‡ªåŠ¨è®¡ç®—ï¼›</p>
            <p class="mt-1">â‘¡ ç›ˆäºå¹³è¡¡ç‚¹ï¼šå½“æ—¥æ¶¨åˆ°è¯¥ä»·æ ¼å–å‡ºï¼Œæ‰£é™¤åŒå‘æ‰‹ç»­è´¹åä¸èµšä¸äºï¼Œæ˜¯å®ç›˜äº¤æ˜“çš„åŸºç¡€å‚è€ƒï¼›</p>
            <p class="mt-1">â‘¢ å®ç›˜æå€¼ï¼šå½“æ—¥æœ€é«˜/æœ€ä½ä»·ä»¥ä¸Šæµ·é‡‘äº¤æ‰€/é“¶è¡ŒAPPå®æ—¶è¡Œæƒ…ä¸ºå‡†ï¼Œæµ‹ç®—ç»“æœä¸ºå½“æ—¥ç†è®ºæœ€å¤§ç›ˆäºï¼›</p>
            <p class="mt-1">â‘£ æ—¥å†…ç‚¹ä½ä¸ºçŸ­çº¿é£æ§æ ¸å¿ƒï¼š<span class="text-day font-medium">ä¸»æ­¢ç›ˆ1%</span>ï¼ˆæ—¥å¸¸æœ€æ˜“è¾¾æˆï¼‰ã€<span class="text-day font-medium">æ¿€è¿›æ­¢ç›ˆ1.5%</span>ï¼ˆè¡Œæƒ…åå¼ºæ—¶ï¼‰ã€<span class="text-day font-medium">æ­¢æŸ0.5%</span>ï¼ˆä¸¥æ§é£é™©ï¼‰ï¼›</p>
            <p class="mt-1">â‘¤ é•¿æœŸç‚¹ä½ä¸ºè¡Œä¸šé€šç”¨å‚è€ƒï¼š<span class="text-success font-medium">æ­¢ç›ˆ8%</span>ã€<span class="text-danger font-medium">æ­¢æŸ5%</span>ï¼Œé€‚åˆæŒæœ‰è¶…1å¤©çš„äº¤æ˜“ï¼›</p>
            <p class="mt-1">â‘¥ è®¡ç®—ç²¾åº¦ï¼šå…‹æ•°ä¿ç•™3ä½å°æ•°ï¼Œé‡‘é¢ä¿ç•™2ä½å°æ•°ï¼Œä¸é“¶è¡Œå®ç›˜äº¤æ˜“ç²¾åº¦ä¸€è‡´ã€‚</p>
            <p class="mt-4">Â© 2026 é»„é‡‘æ—¥å†…å®ç›˜ç›ˆäºè®¡ç®—å™¨ | ä»…ä¾›å‚è€ƒï¼Œä¸æ„æˆæŠ•èµ„å»ºè®®</p>
        </footer>
    </div>

    <script>
        // æ‰‹åŠ¨æ›´æ–°ä»·æ ¼
        function updateManualPrice() {
            const manualPrice = parseFloat(document.getElementById('manual-price').value);
            if (!isNaN(manualPrice) && manualPrice > 0) {
                const now = new Date();
                const timeString = now.toLocaleString('zh-CN');
                
                document.getElementById('current-price').textContent = manualPrice.toFixed(2) + ' å…ƒ/å…‹';
                document.getElementById('update-time').textContent = 'æ›´æ–°æ—¶é—´ï¼š' + timeString;
                
                // æ›´æ–°è®¡ç®—ç»“æœ
                calculateResults();
                
                // ä¿å­˜æ›´æ–°åçš„ä»·æ ¼åˆ°æœ¬åœ°å­˜å‚¨
                saveInputs();
                
                // æ¸…ç©ºè¾“å…¥æ¡†
                document.getElementById('manual-price').value = '';
            } else {
                alert('è¯·è¾“å…¥æœ‰æ•ˆçš„é»„é‡‘ä»·æ ¼');
            }
        }

        // è®¡ç®—æŠ•èµ„ç»“æœ
        function calculateResults() {
            const buyPrice = parseFloat(document.getElementById('buy-price').value) || 0;
            const investAmount = parseFloat(document.getElementById('invest-amount').value) || 0;
            const tradingFeeRate = parseFloat(document.getElementById('trading-fee').value) || 0.5; // é»˜è®¤0.5%
            
            // è·å–å½“å‰é»„é‡‘ä»·æ ¼
            const currentPriceText = document.getElementById('current-price').textContent;
            const currentPrice = parseFloat(currentPriceText.replace(' å…ƒ/å…‹', '')) || 0;
            
            // è·å–å®ç›˜æå€¼å’Œè‡ªå®šä¹‰ç›®æ ‡ä»·æ ¼
            const dayHighPrice = parseFloat(document.getElementById('day-high-price').value) || 0;
            const dayLowPrice = parseFloat(document.getElementById('day-low-price').value) || 0;
            const targetProfitPrice = parseFloat(document.getElementById('target-profit-price').value) || 0;
            const targetLossPrice = parseFloat(document.getElementById('target-loss-price').value) || 0;
            
            // åŸºç¡€å»ºä»“è®¡ç®—
            if (buyPrice > 0 && investAmount > 0) {
                // è®¡ç®—å»ºä»“æ‰‹ç»­è´¹
                const buyFee = (investAmount * tradingFeeRate / 100).toFixed(2);
                // æ‰£å»ºä»“è´¹åå®é™…å¯ç”¨èµ„é‡‘
                const actualFund = investAmount - Number(buyFee);
                // å®é™…å¯è´­å…‹æ•°ï¼ˆ3ä½å°æ•°ï¼‰
                const goldWeight = (actualFund / buyPrice).toFixed(3);
                // æŒä»“æˆæœ¬ä»·ï¼ˆå«å»ºä»“è´¹ï¼‰
                const costPrice = (investAmount / Number(goldWeight)).toFixed(2);
                // ç›ˆäºå¹³è¡¡ç‚¹é‡‘ä»·ï¼šæ‰£é™¤åŒå‘æ‰‹ç»­è´¹åä¸èµšä¸äºçš„å–å‡ºä»·
                const breakEvenPrice = (Number(costPrice) / (1 - tradingFeeRate / 100)).toFixed(2);
                
                // æ›´æ–°åŸºç¡€å»ºä»“ç»“æœ
                document.getElementById('gold-weight').textContent = goldWeight + ' å…‹';
                document.getElementById('trading-fee-amount').textContent = 'Â¥ ' + buyFee;
                document.getElementById('cost-price').textContent = 'Â¥ ' + costPrice + ' /å…‹';
                document.getElementById('break-even-price').textContent = 'Â¥ ' + breakEvenPrice + ' /å…‹';
                
                // è®¡ç®—å½“å‰å¸‚åœºä»·å€¼
                const currentValue = (parseFloat(goldWeight) * currentPrice).toFixed(2);
                const sellFee = (parseFloat(currentValue) * tradingFeeRate / 100).toFixed(2);
                const totalFee = (Number(buyFee) + Number(sellFee)).toFixed(2);
                const profit = (parseFloat(currentValue) - investAmount - Number(totalFee)).toFixed(2);
                const profitRate = ((parseFloat(profit) / investAmount) * 100).toFixed(2);
                
                // æ›´æ–°å½“å‰å¸‚åœºä»·å€¼
                document.getElementById('current-value').textContent = 'Â¥ ' + currentValue;
                
                const profitElement = document.getElementById('profit');
                profitElement.textContent = 'Â¥ ' + profit;
                profitElement.className = 'text-2xl font-bold ' + (parseFloat(profit) > 0 ? 'text-success' : (parseFloat(profit) < 0 ? 'text-danger' : ''));
                
                const profitRateElement = document.getElementById('profit-rate');
                profitRateElement.textContent = profitRate + '%';
                profitRateElement.className = 'text-xl font-bold ' + (parseFloat(profitRate) > 0 ? 'text-success' : (parseFloat(profitRate) < 0 ? 'text-danger' : ''));
                
                // å½“æ—¥å®ç›˜æå€¼è®¡ç®—
                if (dayHighPrice > 0 || dayLowPrice > 0) {
                    // è®¡ç®—æ—¥å†…å®é™…æ³¢åŠ¨å¹…åº¦
                    let dayVolatility = 0;
                    if (dayHighPrice > 0 && dayLowPrice > 0 && dayHighPrice >= dayLowPrice) {
                        dayVolatility = ((dayHighPrice - dayLowPrice) / buyPrice * 100).toFixed(2);
                    }
                    document.getElementById('day-volatility').textContent = dayVolatility + '%';
                    
                    // å½“æ—¥æœ€å¤§å¯ç›ˆåˆ©
                    let maxProfit = 0, maxProfitRate = 0;
                    if (dayHighPrice > 0) {
                        const sellTotal = (dayHighPrice * Number(goldWeight)).toFixed(2);
                        const sellFee = (parseFloat(sellTotal) * tradingFeeRate / 100).toFixed(2);
                        maxProfit = (parseFloat(sellTotal) - Number(sellFee) - investAmount).toFixed(2);
                        maxProfitRate = ((parseFloat(maxProfit) / investAmount) * 100).toFixed(2);
                    }
                    document.getElementById('max-profit').textContent = `Â¥ ${maxProfit} (${maxProfitRate > 0 ? '+' : ''}${maxProfitRate}%)`;
                    
                    // å½“æ—¥æœ€å¤§å¯äºæŸ
                    let maxLoss = 0, maxLossRate = 0;
                    if (dayLowPrice > 0) {
                        const sellTotal = (dayLowPrice * Number(goldWeight)).toFixed(2);
                        const sellFee = (parseFloat(sellTotal) * tradingFeeRate / 100).toFixed(2);
                        maxLoss = (parseFloat(sellTotal) - Number(sellFee) - investAmount).toFixed(2);
                        maxLossRate = ((parseFloat(maxLoss) / investAmount) * 100).toFixed(2);
                    }
                    document.getElementById('max-loss').textContent = `Â¥ ${maxLoss} (${maxLossRate}%)`;
                } else {
                    // é‡ç½®å®ç›˜æå€¼ç»“æœ
                    document.getElementById('day-volatility').textContent = '0.00%';
                    document.getElementById('max-profit').textContent = 'Â¥ 0.00 (+0.00%)';
                    document.getElementById('max-loss').textContent = 'Â¥ 0.00 (-0.00%)';
                }
                
                // è‡ªå®šä¹‰ç›®æ ‡æŒ‚å•è®¡ç®—
                // æ­¢ç›ˆç›®æ ‡
                if (targetProfitPrice > 0) {
                    const profitRate = (((targetProfitPrice - buyPrice) / buyPrice) * 100).toFixed(2);
                    const sellTotal = (targetProfitPrice * Number(goldWeight)).toFixed(2);
                    const sellFee = (parseFloat(sellTotal) * tradingFeeRate / 100).toFixed(2);
                    const profitAmount = (parseFloat(sellTotal) - Number(sellFee) - investAmount).toFixed(2);
                    
                    document.getElementById('t-profit-price').textContent = 'Â¥ ' + targetProfitPrice + ' /å…‹';
                    document.getElementById('t-profit-rate').textContent = (parseFloat(profitRate) >= 0 ? '+' : '') + profitRate + '%';
                    document.getElementById('t-profit-sell-fee').textContent = 'Â¥ ' + sellFee;
                    document.getElementById('t-profit-amount').textContent = 'Â¥ ' + profitAmount;
                } else {
                    // é‡ç½®æ­¢ç›ˆç›®æ ‡ç»“æœ
                    document.getElementById('t-profit-price').textContent = 'Â¥ 0.00 /å…‹';
                    document.getElementById('t-profit-rate').textContent = '+0.00%';
                    document.getElementById('t-profit-sell-fee').textContent = 'Â¥ 0.00';
                    document.getElementById('t-profit-amount').textContent = 'Â¥ 0.00';
                }
                
                // æ­¢æŸç›®æ ‡
                if (targetLossPrice > 0) {
                    const lossRate = (((targetLossPrice - buyPrice) / buyPrice) * 100).toFixed(2);
                    const sellTotal = (targetLossPrice * Number(goldWeight)).toFixed(2);
                    const sellFee = (parseFloat(sellTotal) * tradingFeeRate / 100).toFixed(2);
                    const lossAmount = (parseFloat(sellTotal) - Number(sellFee) - investAmount).toFixed(2);
                    
                    document.getElementById('t-loss-price').textContent = 'Â¥ ' + targetLossPrice + ' /å…‹';
                    document.getElementById('t-loss-rate').textContent = lossRate + '%';
                    document.getElementById('t-loss-sell-fee').textContent = 'Â¥ ' + sellFee;
                    document.getElementById('t-loss-amount').textContent = 'Â¥ ' + lossAmount;
                } else {
                    // é‡ç½®æ­¢æŸç›®æ ‡ç»“æœ
                    document.getElementById('t-loss-price').textContent = 'Â¥ 0.00 /å…‹';
                    document.getElementById('t-loss-rate').textContent = '-0.00%';
                    document.getElementById('t-loss-sell-fee').textContent = 'Â¥ 0.00';
                    document.getElementById('t-loss-amount').textContent = 'Â¥ 0.00';
                }
                
                // ç”Ÿæˆç›ˆåˆ©æ¸…å•
                generateProfitList(buyPrice, investAmount, tradingFeeRate, parseFloat(goldWeight), currentPrice);
                
                // ç”ŸæˆäºæŸæ¸…å•
                generateLossList(buyPrice, investAmount, tradingFeeRate, parseFloat(goldWeight), currentPrice);
                
                // è®¡ç®—æœ€ä½³å–å‡ºå’Œæ­¢æŸä»·æ ¼
                calculateBestPrices(buyPrice, investAmount, tradingFeeRate, parseFloat(goldWeight));
            } else {
                // é‡ç½®æ‰€æœ‰ç»“æœ
                document.getElementById('gold-weight').textContent = '0.000 å…‹';
                document.getElementById('trading-fee-amount').textContent = 'Â¥ 0.00';
                document.getElementById('cost-price').textContent = 'Â¥ 0.00 /å…‹';
                document.getElementById('break-even-price').textContent = 'Â¥ 0.00 /å…‹';
                document.getElementById('current-value').textContent = 'Â¥ 0.00';
                document.getElementById('profit').textContent = 'Â¥ 0.00';
                document.getElementById('profit').className = 'text-2xl font-bold';
                document.getElementById('profit-rate').textContent = '0.00%';
                document.getElementById('profit-rate').className = 'text-xl font-bold';
                document.getElementById('day-volatility').textContent = '0.00%';
                document.getElementById('max-profit').textContent = 'Â¥ 0.00 (+0.00%)';
                document.getElementById('max-loss').textContent = 'Â¥ 0.00 (-0.00%)';
                document.getElementById('t-profit-price').textContent = 'Â¥ 0.00 /å…‹';
                document.getElementById('t-profit-rate').textContent = '+0.00%';
                document.getElementById('t-profit-sell-fee').textContent = 'Â¥ 0.00';
                document.getElementById('t-profit-amount').textContent = 'Â¥ 0.00';
                document.getElementById('t-loss-price').textContent = 'Â¥ 0.00 /å…‹';
                document.getElementById('t-loss-rate').textContent = '-0.00%';
                document.getElementById('t-loss-sell-fee').textContent = 'Â¥ 0.00';
                document.getElementById('t-loss-amount').textContent = 'Â¥ 0.00';
                
                // æ¸…ç©ºç›ˆåˆ©å’ŒäºæŸæ¸…å•
                document.getElementById('profit-table').innerHTML = '<tr><td colspan="5" style="text-align: center; padding: 20px; color: #999;">è¯·è¾“å…¥æœ‰æ•ˆçš„æŠ•èµ„ä¿¡æ¯</td></tr>';
                document.getElementById('loss-table').innerHTML = '<tr><td colspan="5" style="text-align: center; padding: 20px; color: #999;">è¯·è¾“å…¥æœ‰æ•ˆçš„æŠ•èµ„ä¿¡æ¯</td></tr>';
                
                // é‡ç½®æœ€ä½³å–å‡ºå’Œæ­¢æŸä»·æ ¼
                document.getElementById('best-sell-price').textContent = '0.00 å…ƒ/å…‹';
                document.getElementById('aggressive-sell-price').textContent = '0.00 å…ƒ/å…‹';
                document.getElementById('stop-loss-price').textContent = '0.00 å…ƒ/å…‹';
            }
        }

        // ç”Ÿæˆç›ˆåˆ©æ¸…å•
        function generateProfitList(buyPrice, investAmount, tradingFeeRate, goldWeight, currentPrice) {
            if (buyPrice <= 0 || investAmount <= 0 || goldWeight <= 0) {
                document.getElementById('profit-table').innerHTML = '<tr><td colspan="5" style="text-align: center; padding: 20px; color: #999;">è¯·è¾“å…¥æœ‰æ•ˆçš„æŠ•èµ„ä¿¡æ¯</td></tr>';
                return;
            }
            
            // è®¡ç®—å»ºä»“æ‰‹ç»­è´¹
            const buyFee = investAmount * tradingFeeRate / 100;
            
            // å®šä¹‰ä¸åŒçš„ä»·æ ¼æ¶¨å¹…
            const priceChanges = [0.5, 1, 1.5, 2, 3, 4, 5, 6, 7, 8, 9, 10];
            let tableHTML = '';
            
            priceChanges.forEach(change => {
                const priceChangePercent = change;
                const sellPrice = buyPrice * (1 + priceChangePercent / 100);
                const sellValue = sellPrice * goldWeight;
                const sellFee = sellValue * tradingFeeRate / 100;
                const totalFee = buyFee + sellFee;
                const profit = sellValue - investAmount - totalFee;
                const profitRate = (profit / investAmount) * 100;
                
                // åˆ›å»ºè¡Œ
                const tr = document.createElement('tr');
                tr.className = 'table-hover';
                
                // æ ‡è®°ç‚¹ä½ï¼šæ—¥å†…+1%ï¼ˆé»„è‰²ï¼‰ã€æ—¥å†…+1.5%ï¼ˆé»„è‰²ï¼‰ã€é•¿æœŸ+5%ï¼ˆç»¿è‰²ï¼‰ã€é•¿æœŸ+8%ï¼ˆç»¿è‰²ï¼‰
                if (change === 1 || change === 1.5) tr.className += ' day-point';
                if (change === 5 || change === 8) tr.className += ' long-point';
                
                // è¡Œå†…å®¹
                let icon = '';
                if (change === 1 || change === 1.5) icon = 'â˜€ï¸ '; // æ—¥å†…æŒ‡æ ‡å›¾æ ‡
                if (change === 5 || change === 8) icon = 'â­ '; // é•¿æœŸæŒ‡æ ‡å›¾æ ‡
                tr.innerHTML = `
                    <td class="px-3 py-2 font-medium whitespace-nowrap">${icon}+${priceChangePercent}%</td>
                    <td class="px-3 py-2 whitespace-nowrap">Â¥ ${sellPrice.toFixed(2)}</td>
                    <td class="px-3 py-2 whitespace-nowrap hidden sm:table-cell">Â¥ ${sellValue.toFixed(2)}</td>
                    <td class="px-3 py-2 whitespace-nowrap text-success">Â¥ ${profit.toFixed(2)}</td>
                    <td class="px-3 py-2 whitespace-nowrap text-success">+${profitRate.toFixed(2)}%</td>
                `;
                
                tableHTML += tr.outerHTML;
            });
            
            document.getElementById('profit-table').innerHTML = tableHTML;
        }

        // ç”ŸæˆäºæŸæ¸…å•
        function generateLossList(buyPrice, investAmount, tradingFeeRate, goldWeight, currentPrice) {
            if (buyPrice <= 0 || investAmount <= 0 || goldWeight <= 0) {
                document.getElementById('loss-table').innerHTML = '<tr><td colspan="5" style="text-align: center; padding: 20px; color: #999;">è¯·è¾“å…¥æœ‰æ•ˆçš„æŠ•èµ„ä¿¡æ¯</td></tr>';
                return;
            }
            
            // è®¡ç®—å»ºä»“æ‰‹ç»­è´¹
            const buyFee = investAmount * tradingFeeRate / 100;
            
            // å®šä¹‰ä¸åŒçš„ä»·æ ¼è·Œå¹…
            const priceChanges = [0.5, 1, 1.5, 2, 3, 4, 5, 6, 7, 8];
            let tableHTML = '';
            
            priceChanges.forEach(change => {
                const priceChangePercent = change;
                const sellPrice = buyPrice * (1 - priceChangePercent / 100);
                const sellValue = sellPrice * goldWeight;
                const sellFee = sellValue * tradingFeeRate / 100;
                const totalFee = buyFee + sellFee;
                const loss = sellValue - investAmount - totalFee;
                const lossRate = (loss / investAmount) * 100;
                
                // åˆ›å»ºè¡Œ
                const tr = document.createElement('tr');
                tr.className = 'table-hover';
                
                // æ ‡è®°ç‚¹ä½ï¼šæ—¥å†…-0.5%ï¼ˆé»„è‰²ï¼‰ã€é•¿æœŸ-5%ï¼ˆçº¢è‰²ï¼‰
                if (change === 0.5) tr.className += ' day-point';
                if (change === 5) tr.className += ' long-point';
                
                // è¡Œå†…å®¹
                let icon = '';
                if (change === 0.5) icon = 'â˜€ï¸ '; // æ—¥å†…æŒ‡æ ‡å›¾æ ‡
                if (change === 5) icon = 'â­ '; // é•¿æœŸæŒ‡æ ‡å›¾æ ‡
                tr.innerHTML = `
                    <td class="px-3 py-2 font-medium whitespace-nowrap">${icon}-${priceChangePercent}%</td>
                    <td class="px-3 py-2 whitespace-nowrap">Â¥ ${sellPrice.toFixed(2)}</td>
                    <td class="px-3 py-2 whitespace-nowrap hidden sm:table-cell">Â¥ ${sellValue.toFixed(2)}</td>
                    <td class="px-3 py-2 whitespace-nowrap text-danger">Â¥ ${loss.toFixed(2)}</td>
                    <td class="px-3 py-2 whitespace-nowrap text-danger">${lossRate.toFixed(2)}%</td>
                `;
                
                tableHTML += tr.outerHTML;
            });
            
            document.getElementById('loss-table').innerHTML = tableHTML;
        }

        // è®¡ç®—æœ€ä½³å–å‡ºå’Œæ­¢æŸä»·æ ¼
        function calculateBestPrices(buyPrice, investAmount, tradingFeeRate, goldWeight) {
            if (buyPrice <= 0 || investAmount <= 0 || goldWeight <= 0) {
                document.getElementById('best-sell-price').textContent = '0.00 å…ƒ/å…‹';
                document.getElementById('aggressive-sell-price').textContent = '0.00 å…ƒ/å…‹';
                document.getElementById('stop-loss-price').textContent = '0.00 å…ƒ/å…‹';
                return;
            }
            
            // è®¡ç®—å»ºä»“æ‰‹ç»­è´¹
            const buyFee = investAmount * tradingFeeRate / 100;
            const actualCost = investAmount + buyFee;
            
            // ä¸»æ­¢ç›ˆä»·æ ¼ï¼ˆç›®æ ‡æ”¶ç›Šç‡1%ï¼‰
            const mainProfitRate = 1; // 1%
            const mainProfit = investAmount * mainProfitRate / 100;
            // è€ƒè™‘å–å‡ºæ‰‹ç»­è´¹çš„ä¸»æ­¢ç›ˆä»·æ ¼
            const mainSellPrice = (actualCost + mainProfit) / (1 - tradingFeeRate / 100) / goldWeight;
            
            // æ¿€è¿›æ­¢ç›ˆä»·æ ¼ï¼ˆç›®æ ‡æ”¶ç›Šç‡1.5%ï¼‰
            const aggressiveProfitRate = 1.5; // 1.5%
            const aggressiveProfit = investAmount * aggressiveProfitRate / 100;
            // è€ƒè™‘å–å‡ºæ‰‹ç»­è´¹çš„æ¿€è¿›æ­¢ç›ˆä»·æ ¼
            const aggressiveSellPrice = (actualCost + aggressiveProfit) / (1 - tradingFeeRate / 100) / goldWeight;
            
            // æ­¢æŸä»·æ ¼ï¼ˆæœ€å¤§äºæŸ0.5%ï¼‰
            const maxLossRate = 0.5; // 0.5%
            const maxLoss = investAmount * maxLossRate / 100;
            // è€ƒè™‘å–å‡ºæ‰‹ç»­è´¹çš„æ­¢æŸä»·æ ¼
            const stopLossPrice = (actualCost - maxLoss) / (1 - tradingFeeRate / 100) / goldWeight;
            
            // æ›´æ–°æ˜¾ç¤º
            document.getElementById('best-sell-price').textContent = mainSellPrice.toFixed(2) + ' å…ƒ/å…‹';
            document.getElementById('aggressive-sell-price').textContent = aggressiveSellPrice.toFixed(2) + ' å…ƒ/å…‹';
            document.getElementById('stop-loss-price').textContent = stopLossPrice.toFixed(2) + ' å…ƒ/å…‹';
        }

        // ä¿å­˜è¾“å…¥åˆ°æœ¬åœ°å­˜å‚¨
        function saveInputs() {
            // ä»current-priceæ˜¾ç¤ºä¸­è·å–å½“å‰ä»·æ ¼ï¼Œè€Œä¸æ˜¯ä»è¾“å…¥æ¡†è·å–
            const currentPriceText = document.getElementById('current-price').textContent;
            const currentPrice = parseFloat(currentPriceText.replace(' å…ƒ/å…‹', '')) || 0;
            
            const inputs = {
                buyPrice: document.getElementById('buy-price').value,
                investAmount: document.getElementById('invest-amount').value,
                tradingFee: document.getElementById('trading-fee').value,
                dayHighPrice: document.getElementById('day-high-price').value,
                dayLowPrice: document.getElementById('day-low-price').value,
                targetProfitPrice: document.getElementById('target-profit-price').value,
                targetLossPrice: document.getElementById('target-loss-price').value,
                manualPrice: currentPrice > 0 ? currentPrice.toString() : ''
            };
            localStorage.setItem('goldCalculatorInputs', JSON.stringify(inputs));
        }

        // ä»æœ¬åœ°å­˜å‚¨åŠ è½½è¾“å…¥
        function loadInputs() {
            const savedInputs = localStorage.getItem('goldCalculatorInputs');
            if (savedInputs) {
                const inputs = JSON.parse(savedInputs);
                document.getElementById('buy-price').value = inputs.buyPrice || '';
                document.getElementById('invest-amount').value = inputs.investAmount || '';
                document.getElementById('trading-fee').value = inputs.tradingFee || '0.5';
                document.getElementById('day-high-price').value = inputs.dayHighPrice || '';
                document.getElementById('day-low-price').value = inputs.dayLowPrice || '';
                document.getElementById('target-profit-price').value = inputs.targetProfitPrice || '';
                document.getElementById('target-loss-price').value = inputs.targetLossPrice || '';
                document.getElementById('manual-price').value = inputs.manualPrice || '';
                
                // å¦‚æœæœ‰ä¿å­˜çš„æ‰‹åŠ¨ä»·æ ¼ï¼Œæ›´æ–°å½“å‰ä»·æ ¼æ˜¾ç¤º
                if (inputs.manualPrice && !isNaN(parseFloat(inputs.manualPrice))) {
                    document.getElementById('current-price').textContent = parseFloat(inputs.manualPrice).toFixed(2) + ' å…ƒ/å…‹';
                    document.getElementById('update-time').textContent = 'æ›´æ–°æ—¶é—´ï¼š' + new Date().toLocaleString('zh-CN');
                }
            }
        }

        // ç›‘å¬è¾“å…¥å˜åŒ–
        document.getElementById('buy-price').addEventListener('input', function() {
            calculateResults();
            saveInputs();
        });
        document.getElementById('invest-amount').addEventListener('input', function() {
            calculateResults();
            saveInputs();
        });
        document.getElementById('trading-fee').addEventListener('input', function() {
            calculateResults();
            saveInputs();
        });
        document.getElementById('day-high-price').addEventListener('input', function() {
            calculateResults();
            saveInputs();
        });
        document.getElementById('day-low-price').addEventListener('input', function() {
            calculateResults();
            saveInputs();
        });
        document.getElementById('target-profit-price').addEventListener('input', function() {
            calculateResults();
            saveInputs();
        });
        document.getElementById('target-loss-price').addEventListener('input', function() {
            calculateResults();
            saveInputs();
        });
        document.getElementById('manual-price').addEventListener('input', function() {
            saveInputs();
        });

        // åˆå§‹åŒ–
        window.onload = function() {
            // åŠ è½½ä¿å­˜çš„è¾“å…¥
            loadInputs();
            // åˆå§‹åŒ–è®¡ç®—
            calculateResults();
        };
    </script>
</body>
</html>